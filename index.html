<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stage 3: Fill in the blanks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root{
      --bg:#f9f9f9;
      --card:#ffffff;
      --text:#222;
      --muted:#666;
      --primary:#0d6efd;
      --primary-dark:#0b5ed7;
      --shadow:0 0 10px rgba(0,0,0,0.08);
      --radius:12px;
    }
    *{box-sizing:border-box;}
    html,body{height:100%;}
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol", "Noto Color Emoji", sans-serif;
      padding: 1rem;
      margin: 0;
      background-color: var(--bg);
      color: var(--text);
      line-height: 1.5;
    }

    .container{
      max-width: 880px;
      margin: 0 auto;
    }

    h2 {
      text-align: center;
      margin: 0.5rem 0 1rem;
    }

    .header {
      justify-content:center; 
      text-align:center; 
      display:flex; 
      align-items:center; 
      gap:16px; 
      margin-bottom:12px; 
      border-bottom:1px solid #eee; 
      padding-bottom:12px;
      flex-wrap: wrap;
    }
    .header img{height:56px; width:auto;}
    .titleblock{font-weight:700; line-height:1.2; font-size:1.4em;}

    #instruction{
      text-align:center; 
      font-style:italic; 
      font-size:1rem; 
      color:#444; 
      margin:1rem 0;
    }

    .sentence-container {
      background: var(--card);
      padding: 1rem;
      margin: 1rem auto;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    .sentence {
      margin-bottom: 1.2rem;
      font-size: 1rem;
      line-height: 1.6;
    }

    select {
      font-size: 1rem;
      padding: 0.5rem 0.6rem;
      margin: 0.2rem 0.3rem;
      max-width: 100%;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fff;
    }

    .translation {
      color: var(--muted);
      font-size: 0.95rem;
      margin-top: 0.35rem;
    }

    #submit {
      display: block;
      width: 100%;
      max-width: 420px;
      margin: 1.5rem auto;
      padding: 0.9rem 1.4rem;
      font-size: 1.05rem;
      cursor: pointer;
      border: none;
      border-radius: 10px;
      background-color: var(--primary);
      color: white;
      box-shadow: var(--shadow);
    }
    #submit:hover { background-color: var(--primary-dark); }

    #score-report{
      text-align:center; 
      font-size:1.1rem; 
      margin-top:0.5rem;
      font-weight:600;
    }
    #right-answers{
      max-width:880px; 
      margin:1rem auto; 
      font-size:1rem; 
      line-height:1.6;
    }

    .correct { color: #1e7e34; font-weight: 700; }
    .incorrect { color: #dc3545; font-weight: 700; }

    /* Responsive adjustments */
    @media (max-width: 768px){
      body{ padding: 0.75rem; }
      .header{ gap:10px; }
      .header img{ height:44px; }
      .titleblock{ font-size:1.2em; }
      .sentence{ font-size: 1rem; }
      .sentence-container{ padding: 0.9rem; }
    }
    @media (max-width: 480px){
      body{ padding: 0.6rem; }
      .header{ flex-direction: column; }
      .titleblock{ font-size:1.1em; }
      select{ width: 100%; display: inline-block; }
      .sentence{ font-size: 0.98rem; }
      #instruction{ font-size:0.95rem; }
    }

    footer{ text-align:center; margin-top:24px; color:#666; font-size:13px; }
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <img src="LOGO.png" alt="Logo" />
    <div class="titleblock">
      教育部 - 出国人员培训部
      <small style="display:block; font-weight:500; color:#555; margin-top:4px;">第1周 • 词汇练习</small>
    </div>
  </div>

  <p id="instruction">
    Choose the most suitable word to complete each sentence. Clues are provided in Chinese.
  </p>

  <div class="sentence-container" id="exercise"></div>

  <button id="submit">Submit Answers</button>

  <div id="score-report"></div>
  <div id="right-answers"></div>

  <script>
  const data = [
    ["The bus was so ____ that I could hardly move.", "cramped", "公交车太拥挤了，我几乎动不了。"],
    ["The subway is usually very ____ in the morning.", "crowded", "地铁在早上通常非常拥挤。"],
    ["The metro was ____ during rush hour.", "jam-packed", "地铁在高峰期挤满了人。"],
    ["The old bus looked ____ with torn seats.", "shabby", "那辆旧公交车看起来很破旧，座位都破了。"],
    ["The tram was so ____ that everyone opened the windows.", "stuffy", "有轨电车太闷热了，大家都打开了窗户。"],
    ["Taking the subway is very ____ in big cities.", "convenient", "在大城市坐地铁非常方便。"],
    ["Taxis are comfortable, but they can be ____.", "expensive", "出租车很舒服，但可能很贵。"],
    ["The high-speed train in China is very ____.", "efficient", "中国的高铁非常高效。"],
    ["The airplane seats were really ____ on my trip.", "comfortable", "我旅行时的飞机座位非常舒适。"],
    ["Sitting on the back of a motorbike for two hours was very ____.", "uncomfortable", "坐在摩托车后座两个小时非常不舒服。"]
  ];

  const choices = [...new Set(data.map(d => d[1]))];
  const shuffled = [...data].sort(() => Math.random() - 0.5);
  const container = document.getElementById("exercise");

  shuffled.forEach(([template, correct, zh]) => {
    const parts = template.split("____");

    const opts = [correct, ...choices.filter(c => c !== correct)
      .sort(() => Math.random() - 0.5)
      .slice(0, 3)]
      .sort(() => Math.random() - 0.5);

    const wrapper = document.createElement("div");
    wrapper.className = "sentence";
    wrapper.innerHTML = `
      ${parts[0] || ""}
      <select aria-label="Choose the best word" data-answer="${correct}" data-template="${template}">
        <option value="">--choose--</option>
        ${opts.map(o => `<option value="${o}">${o}</option>`).join("")}
      </select>
      ${parts[1] || ""}
      <div class="translation">(${zh})</div>
    `;
    container.appendChild(wrapper);
  });

  document.getElementById("submit").onclick = () => {
    const selects = document.querySelectorAll("select");
    let correctCount = 0;
    const missed = [];

    selects.forEach(sel => {
      sel.disabled = true;
      const user = sel.value;
      const answer = sel.dataset.answer;
      const ok = user === answer;
      sel.className = ok ? "correct" : "incorrect";
      if (ok) correctCount++;
      else {
        const full = sel.dataset.template.replace("____", answer);
        missed.push(`正确句子：${full}`);
      }
    });

    const total = selects.length;
    const percent = Math.round((correctCount / total) * 100);
    document.getElementById("score-report").textContent =
      `${correctCount}/${total} correct – ${percent}%`;

    document.getElementById("right-answers").innerHTML =
      missed.length ? missed.map(s => `<div>• ${s}</div>`).join("") :
      "<div>全部正确！做得好！</div>";
  };
</script>

  <footer>©2025 Dr. Carlos Cardenas • 教育管理学博士</footer>
</div>
</body>
</html>
